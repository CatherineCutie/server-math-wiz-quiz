import{u as z,r as q,W as I,q as _,j as e,Y as k,c as o,_ as m}from"./app-fHsnexT6.js";import{T as u,I as d}from"./TextInput-DvaPTnFk.js";import{I as p}from"./InputLabel-DsymkpEK.js";import{d as F,S as D}from"./Sidebar-jb5DzbGc.js";import{A as C}from"./AuthenticatedLayout-7QxTerEy.js";import"./ApplicationLogo-J6piSAjR.js";import"./transition-BLQmnlt0.js";function W({auth:x}){const{selectedMenu:f,setSelectedMenu:h}=z(),g=async t=>{try{const{data:s}=await o.get("/api/quizzes");return s}catch(s){console.error(s)}},{data:j,isLoading:v,refetch:c}=F({queryKey:["fetchQuiz"],queryFn:g});q.useEffect(()=>{h("upload")},[]);const b=[{name:"upload"}],{data:i,setData:r,post:Q,processing:L,errors:l,reset:N}=I({quiz_title:"",description:"",fileInput:null}),{flash:n}=_().props,y=async t=>{t.preventDefault();const s=new FormData;s.append("quiz_title",i.quiz_title),s.append("description",i.description),s.append("fileInput",i.fileInput);try{const{data:a}=await o.post(route("uploads"),s,{headers:{"Content-Type":"multipart/form-data"}});a&&(m.success(a.message),t.target.reset(),N(),c())}catch(a){console.error(a)}},w=async()=>{try{const{data:t}=await o.get("/api/removeQuiz");console.log(t),t&&(m.success(t.message),c())}catch(t){console.error(t)}};return e.jsxs(C,{user:x.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Upload"}),children:[e.jsx(k,{title:"Upload"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h1",{className:"font-bold text-2xl uppercase",children:f}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(D,{items:b}),v?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(e.Fragment,{children:j.length>0?e.jsxs("div",{className:"w-full text-center",children:[e.jsxs("div",{role:"alert",className:"alert alert-info w-full",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"h-6 w-6 shrink-0 stroke-current",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"A quiz is already uploaded"})]}),e.jsx("button",{className:"btn btn-primary mt-2",onClick:w,children:"Remove Quiz"})]}):e.jsxs("div",{className:"w-full",children:[n&&n.success&&e.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-700 rounded",children:n.success}),e.jsxs("form",{onSubmit:y,children:[e.jsx(p,{htmlFor:"quiz_title",value:"Quiz Title"}),e.jsx(u,{id:"quiz_title",name:"quiz_title",value:i.quiz_title,className:"mt-1 block w-full",autoComplete:"quiz_title",isFocused:!0,onChange:t=>r("quiz_title",t.target.value)}),e.jsx(d,{message:l.quiz_title,className:"mt-2"}),e.jsxs("div",{className:"mt-4",children:[e.jsx(p,{htmlFor:"description",value:"Description"}),e.jsx(u,{id:"description",type:"text",name:"description",value:i.description,className:"mt-1 block w-full",autoComplete:"description",onChange:t=>r("description",t.target.value)}),e.jsx(d,{message:l.description,className:"mt-2"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"fileInput",className:"block text-sm font-medium text-gray-700",children:"Upload File"}),e.jsx("input",{type:"file",id:"fileInput",name:"fileInput",className:"mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100",onChange:t=>r("fileInput",t.target.files[0])}),e.jsx(d,{message:l.fileInput,className:"mt-2"})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Submit"})})]})]})})]})]})})})})]})}export{W as default};
