import{u as N,r as c,j as e,Y as S,c as l}from"./app-fHsnexT6.js";import{G as z,u as q,T as E}from"./Table-C2kT-Cjh.js";import{A as L}from"./AuthenticatedLayout-7QxTerEy.js";import{S as B}from"./Sidebar-jb5DzbGc.js";import"./ApplicationLogo-J6piSAjR.js";import"./transition-BLQmnlt0.js";function u(o){return z({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"},child:[]},{tag:"path",attr:{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"},child:[]}]})(o)}const A=({auth:o})=>{var d;const{selectedMenu:m,setSelectedMenu:x,setQuizScoreData:h,quizScoreData:p}=N(),[f,r]=c.useState(!1);c.useEffect(()=>{x("quiz")},[]);const i=[{name:"quiz",id:1}],j=async s=>{try{const{data:a}=await l.get("/api/getScoresByQuizId/"+s);return h(a),a}catch(a){console.error(a)}},n=q({queries:i.map(s=>({queryKey:["fetchDataQuiz"+s.id],queryFn:()=>j(s.id)}))}),g=n.some(s=>s.isLoading),b=n.some(s=>s.isError),w=((d=n.find(s=>s.data))==null?void 0:d.data)||[],v=async()=>{r(!0);try{const s=await l.post("/api/download-quiz-csv",p,{responseType:"blob"}),y=`quiz_scores_${new Date().toISOString().slice(0,10)}.csv`,D=window.URL.createObjectURL(new Blob([s.data])),t=document.createElement("a");t.href=D,t.setAttribute("download",y),document.body.appendChild(t),t.click(),setTimeout(()=>{r(!1)},6e3)}catch(s){r(!1),console.error("Error downloading the CSV:",s)}};return e.jsxs(L,{user:o.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx(S,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h1",{className:"font-bold text-2xl uppercase",children:m}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"flex gap-10",children:[e.jsx(B,{items:i}),e.jsxs("div",{className:"overflow-x-auto flex-1",children:[e.jsx("div",{className:"flex justify-end",children:f?e.jsxs("button",{className:"btn btn-primary btn-sm",disabled:!0,children:[e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Download",e.jsx(u,{size:15})]}):e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:v,children:["Download",e.jsx(u,{size:15})]})}),g?e.jsx("p",{children:"Loading..."}):b?e.jsx("p",{children:"Error loading data."}):e.jsx(E,{data:w})]})]})]})})})})]})};export{A as default};
