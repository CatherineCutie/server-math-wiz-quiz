import{u as N,r as d,j as e,Y as z,c as u}from"./app-BIkIX4JY.js";import{G as q,u as E,T as L}from"./Table-CH-cWFoe.js";import{A as B}from"./AuthenticatedLayout-CxjU9HdU.js";import{u as C,S as M}from"./useResponsive-DTXe_vsE.js";import"./ApplicationLogo-VTHQrUWK.js";import"./transition-BPkDDPaH.js";function m(r){return q({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"},child:[]},{tag:"path",attr:{d:"M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"},child:[]}]})(r)}const F=({auth:r})=>{var l;const{selectedMenu:x,setSelectedMenu:h,setQuizScoreData:p,quizScoreData:j}=N(),{isSmallScreen:g,isMediumScreen:k,isLargeScreen:I}=C(),[f,o]=d.useState(!1);d.useEffect(()=>{h("quiz")},[]);const c=[{name:"quiz",id:1}],b=async s=>{try{const{data:a}=await u.get("/api/getScoresByQuizId/"+s);return p(a),console.log(a),a}catch(a){console.error(a)}},n=E({queries:c.map(s=>({queryKey:["fetchDataQuiz"+s.id],queryFn:()=>b(s.id)}))}),v=n.some(s=>s.isLoading),w=n.some(s=>s.isError),i=((l=n.find(s=>s.data))==null?void 0:l.data)||[],y=async()=>{o(!0);try{const s=await u.post("/api/download-quiz-csv",j,{responseType:"blob"}),S=`quiz_scores_${new Date().toISOString().slice(0,10)}.csv`,D=window.URL.createObjectURL(new Blob([s.data])),t=document.createElement("a");t.href=D,t.setAttribute("download",S),document.body.appendChild(t),t.click(),setTimeout(()=>{o(!1)},6e3)}catch(s){o(!1),console.error("Error downloading the CSV:",s)}};return e.jsxs(B,{user:r.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Dashboard"}),children:[e.jsx(z,{title:"Dashboard"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h1",{className:"font-bold text-2xl uppercase",children:x}),e.jsx("div",{className:"divider"}),e.jsxs("div",{className:"flex gap-10",children:[g?null:e.jsx(M,{items:c}),e.jsxs("div",{className:"overflow-x-auto flex-1",children:[e.jsx("div",{className:"flex justify-end",children:Object.keys(i).length===0&&i.constructor===Object?null:e.jsx(e.Fragment,{children:f?e.jsxs("button",{className:"btn btn-primary btn-sm",disabled:!0,children:[e.jsx("span",{className:"loading loading-spinner loading-xs"}),"Download",e.jsx(m,{size:15})]}):e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:y,children:["Download",e.jsx(m,{size:15})]})})}),v?e.jsx("p",{children:"Loading..."}):w?e.jsx("p",{children:"Error loading data."}):e.jsx(L,{data:i})]})]})]})})})})]})};export{F as default};
